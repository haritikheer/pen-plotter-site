(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{1267:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>O});var a=t(8081),r=t(2149),n=t(6218),i=t(3484),l=t(6522),o=t(4483);function c(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,o.QP)((0,l.$)(s))}let d=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),x=r.forwardRef((e,s)=>{let{className:t,variant:r,size:i,asChild:l=!1,...o}=e,x=l?n.DX:"button";return(0,a.jsx)(x,{className:c(d({variant:r,size:i,className:t})),ref:s,...o})});x.displayName="Button";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:c("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});m.displayName="Card";let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:c("flex flex-col space-y-1.5 p-6",t),...r})});h.displayName="CardHeader";let g=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:c("text-2xl font-semibold leading-none tracking-tight",t),...r})});g.displayName="CardTitle",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:c("text-sm text-muted-foreground",t),...r})}).displayName="CardDescription";let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:c("p-6 pt-0",t),...r})});p.displayName="CardContent",r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:c("flex items-center p-6 pt-0",t),...r})}).displayName="CardFooter";var y=t(1107),u=t(4331),b=t(1440);function f(e){let{connection:s,setConnection:t,onConnect:r}=e;return(0,a.jsxs)(m,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsx)(h,{className:"py-2",children:(0,a.jsxs)(g,{className:"text-sm text-white flex items-center gap-2",children:[(0,a.jsx)(y.A,{className:"w-4 h-4"}),"Connection"]})}),(0,a.jsxs)(p,{className:"py-2 space-y-2",children:[(0,a.jsx)("div",{className:"flex gap-1",children:[{type:"wifi",icon:u.A,label:"WiFi"},{type:"webserial",icon:b.A,label:"Serial"},{type:"webusb",icon:b.A,label:"USB"}].map(e=>(0,a.jsxs)(x,{onClick:()=>t(s=>({...s,type:e.type})),variant:s.type===e.type?"default":"outline",size:"sm",className:"text-xs h-7 ".concat(s.type===e.type?"bg-blue-600 text-white":"bg-gray-700 border-gray-600 text-gray-300"),children:[(0,a.jsx)(e.icon,{className:"w-3 h-3 mr-1"}),e.label]},e.type))}),"wifi"===s.type&&(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)("input",{type:"text",value:s.wifiIP,onChange:e=>t(s=>({...s,wifiIP:e.target.value})),placeholder:"192.168.4.1",className:"flex-1 px-2 py-1 text-xs bg-gray-700 border border-gray-600 rounded text-white"}),(0,a.jsx)(x,{onClick:r,size:"sm",className:"text-xs h-7 ".concat(s.isConnected?"bg-green-600":"bg-blue-600"," hover:opacity-80 text-white"),children:s.isConnected?"Connected":"Connect"})]}),(0,a.jsxs)("div",{className:"text-xs ".concat(s.isConnected?"text-green-400":"text-red-400"),children:["Status: ",s.isConnected?"Connected":"Disconnected"]})]})]})}var j=t(1528),v=t(6360),N=t(7273);function w(e){let{status:s,connection:t,onStartPlot:r,onSendCommand:n}=e;return(0,a.jsxs)(m,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsx)(h,{className:"py-2",children:(0,a.jsx)(g,{className:"text-sm text-white",children:"Plot Commands"})}),(0,a.jsxs)(p,{className:"py-2 space-y-2",children:[(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsxs)(x,{onClick:r,disabled:!t.isConnected,className:"flex-1 h-8 text-xs bg-green-600 hover:bg-green-700 text-white",children:[(0,a.jsx)(j.A,{className:"w-3 h-3 mr-1"}),"Start"]}),(0,a.jsxs)(x,{onClick:()=>n("pause"),disabled:!s.isPlotting,className:"flex-1 h-8 text-xs bg-orange-500 hover:bg-orange-600 text-white",children:[(0,a.jsx)(v.A,{className:"w-3 h-3 mr-1"}),"Pause"]}),(0,a.jsxs)(x,{onClick:()=>n("stop"),disabled:!s.isPlotting,className:"flex-1 h-8 text-xs bg-red-600 hover:bg-red-700 text-white",children:[(0,a.jsx)(N.A,{className:"w-3 h-3 mr-1"}),"Stop"]})]}),s.isPlotting&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-300",children:[(0,a.jsx)("span",{children:"Progress"}),(0,a.jsxs)("span",{children:[s.progress.toFixed(1),"%"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-700 rounded-full h-1.5",children:(0,a.jsx)("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:"".concat(s.progress,"%")}})}),(0,a.jsxs)("div",{className:"text-xs text-gray-400 text-center",children:["Est. time: ",s.timeRemaining,"s"]})]})]})]})}function C(e){let{status:s}=e;return(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,a.jsx)(m,{className:"bg-gray-800 border-gray-700",children:(0,a.jsxs)(p,{className:"p-3",children:[(0,a.jsx)("div",{className:"text-xs text-blue-300 mb-1",children:"Position"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-white",children:["X: ",s.position.x.toFixed(1)]}),(0,a.jsxs)("div",{className:"text-sm font-bold text-white",children:["Y: ",s.position.y.toFixed(1)]})]})}),(0,a.jsx)(m,{className:"bg-gray-800 border-gray-700",children:(0,a.jsxs)(p,{className:"p-3",children:[(0,a.jsx)("div",{className:"text-xs text-green-300 mb-1",children:"Speed"}),(0,a.jsx)("div",{className:"text-sm font-bold text-white",children:s.speed.toFixed(2)}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:"mm/s"})]})}),(0,a.jsx)(m,{className:"bg-gray-800 border-gray-700",children:(0,a.jsxs)(p,{className:"p-3",children:[(0,a.jsx)("div",{className:"text-xs text-orange-300 mb-1",children:"Status"}),(0,a.jsxs)("div",{className:"text-sm font-bold text-white flex items-center",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full mr-1 ".concat(s.isOnline?"bg-green-500":"bg-red-500")}),s.isOnline?"Online":"Offline"]})]})})]})}function k(e){let{onMove:s,onHome:t}=e,[n,i]=(0,r.useState)(5);return(0,a.jsxs)(m,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsx)(h,{className:"py-2",children:(0,a.jsx)(g,{className:"text-sm text-white",children:"Manual Movement"})}),(0,a.jsxs)(p,{className:"py-2 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-gray-300",children:"Step:"}),(0,a.jsx)("div",{className:"flex gap-1",children:[1,5,10,25].map(e=>(0,a.jsx)(x,{onClick:()=>i(e),variant:n===e?"default":"outline",size:"sm",className:"text-xs h-6 w-6 p-0 ".concat(n===e?"bg-blue-600 text-white":"bg-gray-700 border-gray-600 text-gray-300"),children:e},e))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-1 max-w-32 mx-auto",children:[(0,a.jsx)(x,{onClick:()=>s("up-left",n),className:"bg-gray-700 hover:bg-gray-600 text-white text-xs p-1 h-7 w-7",size:"sm",children:"↖"}),(0,a.jsx)(x,{onClick:()=>s("up",n),className:"bg-gray-700 hover:bg-gray-600 text-white text-xs p-1 h-7 w-7",size:"sm",children:"↑"}),(0,a.jsx)(x,{onClick:()=>s("up-right",n),className:"bg-gray-700 hover:bg-gray-600 text-white text-xs p-1 h-7 w-7",size:"sm",children:"↗"}),(0,a.jsx)(x,{onClick:()=>s("left",n),className:"bg-gray-700 hover:bg-gray-600 text-white text-xs p-1 h-7 w-7",size:"sm",children:"←"}),(0,a.jsx)(x,{onClick:t,className:"bg-purple-600 hover:bg-purple-700 text-white text-xs p-1 h-7 w-7",size:"sm",children:"\uD83C\uDFE0"}),(0,a.jsx)(x,{onClick:()=>s("right",n),className:"bg-gray-700 hover:bg-gray-600 text-white text-xs p-1 h-7 w-7",size:"sm",children:"→"}),(0,a.jsx)(x,{onClick:()=>s("down-left",n),className:"bg-gray-700 hover:bg-gray-600 text-white text-xs p-1 h-7 w-7",size:"sm",children:"↙"}),(0,a.jsx)(x,{onClick:()=>s("down",n),className:"bg-gray-700 hover:bg-gray-600 text-white text-xs p-1 h-7 w-7",size:"sm",children:"↓"}),(0,a.jsx)(x,{onClick:()=>s("down-right",n),className:"bg-gray-700 hover:bg-gray-600 text-white text-xs p-1 h-7 w-7",size:"sm",children:"↘"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-1 mt-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-xs text-gray-300",children:"X Position:"}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("input",{type:"number",className:"w-full text-xs bg-gray-700 border border-gray-600 rounded-l text-white px-2 py-1",placeholder:"0.0"}),(0,a.jsx)(x,{size:"sm",className:"text-xs h-6 rounded-l-none bg-blue-600 hover:bg-blue-700",children:"Go"})]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-xs text-gray-300",children:"Y Position:"}),(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("input",{type:"number",className:"w-full text-xs bg-gray-700 border border-gray-600 rounded-l text-white px-2 py-1",placeholder:"0.0"}),(0,a.jsx)(x,{size:"sm",className:"text-xs h-6 rounded-l-none bg-blue-600 hover:bg-blue-700",children:"Go"})]})]})]})]})]})}function z(e){let{status:s,onSetPenState:t,onSetSpeed:n,onEmergencyStop:i}=e,[l,o]=(0,r.useState)(50),c=e=>{o(e),n(e)};return(0,a.jsxs)(m,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsx)(h,{className:"py-2",children:(0,a.jsx)(g,{className:"text-sm text-white",children:"Pen & Speed"})}),(0,a.jsxs)(p,{className:"py-2 space-y-2",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-xs text-gray-300",children:"Speed"}),(0,a.jsxs)("span",{className:"text-xs text-blue-400",children:[l,"%"]})]}),(0,a.jsx)("input",{type:"range",min:"1",max:"100",value:l,onChange:e=>c(Number.parseInt(e.target.value)),className:"w-full h-1.5 bg-gray-700 rounded-lg appearance-none cursor-pointer"}),(0,a.jsxs)("div",{className:"flex justify-between text-[10px] text-gray-500",children:[(0,a.jsx)("span",{children:"Slow"}),(0,a.jsx)("span",{children:"Medium"}),(0,a.jsx)("span",{children:"Fast"})]})]}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(x,{onClick:()=>t("up"),className:"flex-1 text-xs h-7 ".concat(s.penDown?"bg-gray-700":"bg-green-600"," text-white"),children:"Pen Up"}),(0,a.jsx)(x,{onClick:()=>t("down"),className:"flex-1 text-xs h-7 ".concat(s.penDown?"bg-red-600":"bg-gray-700"," text-white"),children:"Pen Down"})]}),(0,a.jsx)(x,{onClick:i,className:"w-full bg-red-600 hover:bg-red-700 text-white font-bold text-xs h-8",children:"\uD83D\uDED1 EMERGENCY STOP"})]})]})}var P=t(6427),S=t(7316),D=t(6079);function M(e){let{pathHistory:s,status:t,onClearCanvas:n}=e,i=(0,r.useRef)(null),[l,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)({zoom:1,offset:{x:0,y:0},isDragging:!1,dragStart:{x:0,y:0}}),y=e=>{d(s=>({...s,isDragging:!0,dragStart:{x:e.clientX-s.offset.x,y:e.clientY-s.offset.y}}))},u=e=>{c.isDragging&&d(s=>({...s,offset:{x:e.clientX-s.dragStart.x,y:e.clientY-s.dragStart.y}}))},b=()=>{d(e=>({...e,isDragging:!1}))},f=e=>{d(s=>({...s,zoom:Math.max(.5,Math.min(5,s.zoom*e))}))},j=()=>{d(e=>({...e,zoom:1,offset:{x:0,y:0}}))};return(0,r.useEffect)(()=>{i.current&&function(e,s,t,a){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],n=e.getContext("2d");if(!n)return;let{width:i,height:l}=e;n.clearRect(0,0,i,l),n.save(),n.translate(a.offset.x,a.offset.y),n.scale(a.zoom,a.zoom),n.strokeStyle="#e5e7eb",n.lineWidth=1/a.zoom;let o=r?3:1;for(let e=-a.offset.x/a.zoom;e<=(i-a.offset.x)/a.zoom;e+=20)n.beginPath(),n.moveTo(e,-a.offset.y/a.zoom),n.lineTo(e,(l-a.offset.y)/a.zoom),n.stroke();for(let e=-a.offset.y/a.zoom;e<=(l-a.offset.y)/a.zoom;e+=20)n.beginPath(),n.moveTo(-a.offset.x/a.zoom,e),n.lineTo((i-a.offset.x)/a.zoom,e),n.stroke();n.strokeStyle="#374151",n.lineWidth=2/a.zoom,n.strokeRect(0,0,200*o,200*o);let c=200*o/200,d=200*o/200;if(s.length>1){n.lineWidth=2/a.zoom,n.lineCap="round",n.lineJoin="round";for(let e=1;e<s.length;e++){let t=s[e-1],a=s[e];t.penDown&&a.penDown&&(n.strokeStyle="#3b82f6",n.beginPath(),n.moveTo(t.x*c,t.y*d),n.lineTo(a.x*c,a.y*d),n.stroke())}}let x=t.position.x*c,m=t.position.y*d;n.fillStyle=t.penDown?"#ef4444":"#10b981",n.beginPath(),n.arc(x,m,6/a.zoom,0,2*Math.PI),n.fill(),n.strokeStyle=t.penDown?"#dc2626":"#059669",n.lineWidth=2/a.zoom,n.beginPath(),n.arc(x,m,10/a.zoom,0,2*Math.PI),n.stroke(),n.restore()}(i.current,s,t,c,l)},[s,t,c,l]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(m,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsx)(h,{className:"py-2",children:(0,a.jsxs)(g,{className:"text-sm text-white flex items-center justify-between",children:["Live Preview",(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(x,{onClick:()=>o(!l),variant:"outline",size:"sm",className:"h-6 w-6 p-0 bg-gray-700 border-gray-600 text-gray-300",children:l?(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("polyline",{points:"4 14 10 14 10 20"}),(0,a.jsx)("polyline",{points:"20 10 14 10 14 4"}),(0,a.jsx)("line",{x1:"14",y1:"10",x2:"21",y2:"3"}),(0,a.jsx)("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]}):(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("polyline",{points:"15 3 21 3 21 9"}),(0,a.jsx)("polyline",{points:"9 21 3 21 3 15"}),(0,a.jsx)("line",{x1:"21",y1:"3",x2:"14",y2:"10"}),(0,a.jsx)("line",{x1:"3",y1:"21",x2:"10",y2:"14"})]})}),(0,a.jsx)(x,{onClick:()=>f(1.2),variant:"outline",size:"sm",className:"h-6 w-6 p-0 bg-gray-700 border-gray-600 text-gray-300",children:(0,a.jsx)(P.A,{className:"w-3 h-3"})}),(0,a.jsx)(x,{onClick:()=>f(1/1.2),variant:"outline",size:"sm",className:"h-6 w-6 p-0 bg-gray-700 border-gray-600 text-gray-300",children:(0,a.jsx)(S.A,{className:"w-3 h-3"})}),(0,a.jsx)(x,{onClick:j,variant:"outline",size:"sm",className:"h-6 w-6 p-0 bg-gray-700 border-gray-600 text-gray-300",children:(0,a.jsx)(D.A,{className:"w-3 h-3"})}),(0,a.jsx)(x,{onClick:n,variant:"outline",size:"sm",className:"h-6 text-xs bg-gray-700 border-gray-600 text-gray-300",children:"Clear"})]})]})}),(0,a.jsx)(p,{className:"py-2",children:(0,a.jsxs)("div",{className:"relative bg-gray-900 border-2 border-gray-600 rounded-lg overflow-hidden flex justify-center",children:[(0,a.jsx)("div",{className:"w-[200px] h-[200px]",children:(0,a.jsx)("canvas",{ref:i,width:200,height:200,className:"w-full h-full cursor-move",onMouseDown:y,onMouseMove:u,onMouseUp:b,onMouseLeave:b})}),(0,a.jsx)("div",{className:"absolute top-1 left-1 bg-black bg-opacity-75 text-white px-1 py-0.5 rounded text-xs",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 rounded-full ".concat(t.penDown?"bg-red-400":"bg-green-400")}),t.penDown?"Down":"Up"]})}),(0,a.jsxs)("div",{className:"absolute top-1 right-1 bg-black bg-opacity-75 text-white px-1 py-0.5 rounded text-xs",children:[(100*c.zoom).toFixed(0),"%"]})]})})]}),l&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-80 z-50 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-gray-900 border-2 border-gray-700 rounded-lg w-full max-w-4xl max-h-[90vh] flex flex-col",children:[(0,a.jsxs)("div",{className:"p-2 flex justify-between items-center border-b border-gray-700",children:[(0,a.jsx)("h3",{className:"text-white font-medium",children:"Detailed Preview"}),(0,a.jsxs)("div",{className:"flex gap-1",children:[(0,a.jsx)(x,{onClick:()=>f(1.2),variant:"outline",size:"sm",className:"h-7 w-7 p-0 bg-gray-800 border-gray-600 text-gray-300",children:(0,a.jsx)(P.A,{className:"w-4 h-4"})}),(0,a.jsx)(x,{onClick:()=>f(1/1.2),variant:"outline",size:"sm",className:"h-7 w-7 p-0 bg-gray-800 border-gray-600 text-gray-300",children:(0,a.jsx)(S.A,{className:"w-4 h-4"})}),(0,a.jsx)(x,{onClick:j,variant:"outline",size:"sm",className:"h-7 w-7 p-0 bg-gray-800 border-gray-600 text-gray-300",children:(0,a.jsx)(D.A,{className:"w-4 h-4"})}),(0,a.jsx)(x,{onClick:()=>o(!1),variant:"outline",size:"sm",className:"h-7 px-2 bg-gray-800 border-gray-600 text-gray-300",children:"Close"})]})]}),(0,a.jsxs)("div",{className:"relative flex-1 overflow-hidden",children:[(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,a.jsx)("canvas",{ref:i,width:600,height:600,className:"max-w-full max-h-full cursor-move",onMouseDown:y,onMouseMove:u,onMouseUp:b,onMouseLeave:b})}),(0,a.jsx)("div",{className:"absolute top-2 left-2 bg-black bg-opacity-75 text-white px-2 py-1 rounded text-xs",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(t.penDown?"bg-red-400":"bg-green-400")}),t.penDown?"Pen Down":"Pen Up"]})}),(0,a.jsxs)("div",{className:"absolute top-2 right-2 bg-black bg-opacity-75 text-white px-2 py-1 rounded text-xs",children:[(100*c.zoom).toFixed(0),"% zoom"]}),(0,a.jsxs)("div",{className:"absolute bottom-2 left-2 bg-black bg-opacity-75 text-white px-2 py-1 rounded text-xs",children:["X: ",t.position.x.toFixed(1),", Y: ",t.position.y.toFixed(1)]})]})]})})]})}var F=t(4314);function A(e){let{notifications:s}=e;return(0,a.jsxs)(m,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsx)(h,{className:"py-2",children:(0,a.jsxs)(g,{className:"text-sm text-white flex items-center gap-2",children:[(0,a.jsx)(F.A,{className:"w-4 h-4"}),"Activity Log"]})}),(0,a.jsx)(p,{className:"py-2 max-h-32 overflow-y-auto",children:s.length>0?(0,a.jsx)("ul",{className:"space-y-1 text-xs",children:s.map((e,s)=>(0,a.jsxs)("li",{className:"text-gray-300 flex items-start gap-1",children:[(0,a.jsx)("span",{className:"text-blue-400 inline-block w-12",children:new Date().toLocaleTimeString().slice(0,-3)}),e]},s))}):(0,a.jsx)("p",{className:"text-gray-500 text-xs italic",children:"No activity yet"})})]})}var R=t(4096),E=t(2544),I=t(9921);function T(){return(0,a.jsxs)(m,{className:"bg-gray-800 border-gray-700",children:[(0,a.jsx)(h,{className:"py-2",children:(0,a.jsxs)(g,{className:"text-sm text-white flex items-center gap-2",children:[(0,a.jsx)(R.A,{className:"w-4 h-4"}),"Quick Actions"]})}),(0,a.jsx)(p,{className:"py-2",children:(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,a.jsxs)(x,{size:"sm",className:"text-xs h-8 bg-blue-600 hover:bg-blue-700",children:[(0,a.jsx)(E.A,{className:"w-3 h-3 mr-1"})," File Info"]}),(0,a.jsx)(x,{size:"sm",className:"text-xs h-8 bg-purple-600 hover:bg-purple-700",children:"Calibrate"}),(0,a.jsx)(x,{size:"sm",className:"text-xs h-8 bg-green-600 hover:bg-green-700",children:"Test Pattern"}),(0,a.jsxs)(x,{size:"sm",className:"text-xs h-8 bg-orange-600 hover:bg-orange-700",children:[(0,a.jsx)(I.A,{className:"w-3 h-3 mr-1"})," Diagnostics"]})]})})]})}function O(){let{connection:e,setConnection:s,sendCommand:t,connectToDevice:n,baseURL:i}=function(){let[e,s]=(0,r.useState)({type:"wifi",wifiIP:"192.168.4.1",isConnected:!1}),t="http://".concat(e.wifiIP),a=async()=>{try{if("wifi"===e.type){if((await fetch("".concat(t,"/status"))).ok)return s(e=>({...e,isConnected:!0})),{success:!0,message:"Connected via WiFi"}}else if("webserial"===e.type){if("serial"in navigator){let e=await navigator.serial.requestPort();return await e.open({baudRate:115200}),s(e=>({...e,isConnected:!0})),{success:!0,message:"Connected via WebSerial"}}}else if("webusb"===e.type&&"usb"in navigator){let e=await navigator.usb.requestDevice({filters:[]});return await e.open(),s(e=>({...e,isConnected:!0})),{success:!0,message:"Connected via WebUSB"}}}catch(e){console.error("Connection failed:",e),s(e=>({...e,isConnected:!1}))}return{success:!1,message:"Connection failed"}};return{connection:e,setConnection:s,sendCommand:async e=>{try{return await fetch("".concat(t,"/command?cmd=").concat(e)),console.log("Sent:",e),{success:!0,message:"Command sent: ".concat(e)}}catch(e){return console.error("Failed to send command:",e),{success:!1,message:"Failed to send command"}}},connectToDevice:a,baseURL:t}}(),{status:l,setStatus:o,pathHistory:c,clearPathHistory:d}=function(){let[e,s]=(0,r.useState)({position:{x:0,y:0},speed:0,timeRemaining:0,isOnline:!1,penDown:!1,isPlotting:!1,progress:0}),[t,a]=(0,r.useState)([]),n=()=>{let t={x:Math.max(0,Math.min(200,e.position.x+(Math.random()-.5)*10)),y:Math.max(0,Math.min(150,e.position.y+(Math.random()-.5)*10))},r={position:t,speed:5*Math.random(),timeRemaining:Math.floor(60*Math.random()),isOnline:Math.random()>.3,penDown:Math.random()>.3,isPlotting:e.isPlotting,progress:e.isPlotting?Math.min(100,e.progress+5*Math.random()):0};s(r),a(e=>[...e.slice(-500),{x:t.x,y:t.y,penDown:r.penDown,timestamp:Date.now()}])};return(0,r.useEffect)(()=>{let e=setInterval(n,2e3);return()=>clearInterval(e)},[e.isPlotting]),{status:e,setStatus:s,pathHistory:t,clearPathHistory:()=>{a([])}}}(),{notifications:x,addNotification:m}=function(){let[e,s]=(0,r.useState)([]);return{notifications:e,addNotification:e=>{s(s=>[e,...s.slice(0,4)])},clearNotifications:()=>{s([])}}}(),h=async()=>{let e=await n();return m(e.message),e},g=async e=>{m((await t(e)).message)},p=async()=>{try{(await fetch("".concat(i,"/plot"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({command:"start"})})).ok&&(o(e=>({...e,isPlotting:!0,progress:0})),m("Plot started"))}catch(e){m("Failed to start plot")}},y=async(e,s)=>{try{await fetch("".concat(i,"/move?dir=").concat(e,"&dist=").concat(s)),m("Manual move: ".concat(e," ").concat(s,"mm"))}catch(e){m("Failed to move manually")}},u=async()=>{try{await fetch("".concat(i,"/home")),m("Homing position")}catch(e){m("Failed to home position")}},b=async e=>{try{await fetch("".concat(i,"/pen?state=").concat(e)),m("Pen ".concat(e))}catch(e){m("Failed to set pen state")}},j=async e=>{try{await fetch("".concat(i,"/speed?value=").concat(e)),m("Speed set to ".concat(e,"%"))}catch(e){m("Failed to set speed")}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 py-6 px-4 relative overflow-hidden",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto relative z-10",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-1",children:"Advanced Pen Plotter Control"}),(0,a.jsx)("p",{className:"text-blue-300 text-sm",children:"Professional Drawing & Automation Interface"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-12 gap-4",children:[(0,a.jsxs)("div",{className:"xl:col-span-5 space-y-4",children:[(0,a.jsx)(M,{pathHistory:c,status:l,onClearCanvas:d}),(0,a.jsx)(A,{notifications:x})]}),(0,a.jsxs)("div",{className:"xl:col-span-7 space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(f,{connection:e,setConnection:s,onConnect:h}),(0,a.jsx)(w,{status:l,connection:e,onStartPlot:p,onSendCommand:g})]}),(0,a.jsx)(C,{status:l}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(k,{onMove:y,onHome:u}),(0,a.jsx)(z,{status:l,onSetPenState:b,onSetSpeed:j,onEmergencyStop:()=>{g("emergency_stop")}})]}),(0,a.jsx)(T,{})]})]}),(0,a.jsx)("div",{className:"mt-4 text-center text-xs text-gray-500",children:(0,a.jsx)("p",{children:"Pen Plotter Control Interface v1.0 • ESP32 Firmware v0.9"})})]})})}},5278:(e,s,t)=>{Promise.resolve().then(t.bind(t,1267))}},e=>{var s=s=>e(e.s=s);e.O(0,[76,497,954,358],()=>s(5278)),_N_E=e.O()}]);